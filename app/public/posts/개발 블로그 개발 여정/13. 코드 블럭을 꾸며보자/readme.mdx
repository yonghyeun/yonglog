---
title: ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ì½”ë“œë¸”ë¡ ê¾¸ë¯¸ê¸°
description: ë‚˜ë„ ì˜ˆìœ ì½”ë“œë¸”ë¡ì„ ë Œë”ë§ í•˜ê³  ì‹¶ì–´ìš”
tag:
  - react
  - nextjs
  - routing
  - mdx
  - design
postId: 66093
date: Fri Jun 07 2024
time: 1717771971209
---

# í˜„ì¬ì˜ ì½”ë“œ ë¸”ë¡ì˜ ëª¨ì–‘ìƒˆ

![ì´ì „ ì½”ë“œ ë¸”ëŸ­ ì´ë¯¸ì§€](image.png)

```tsx
// app/[postId]/page.tsx ì˜ ì¼ë¶€

const components = useMDXComponents({}, meta.path);

<MDXRemote source={content} components={components} />;
```

````tsx
export const useMDXComponents = (
  components: MDXComponents = {},
  postPath: string,
): MDXComponents => {
  return {
    /* ì¤‘ë³µ ì½”ë“œ ìƒëµ */
    // TODO ì½”ë“œ í¬ë§·í„° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì¶”ê°€í•˜ê¸°
    code: ({ children, className, ...props }) => {
      return (
        <code className={'font-ibm-plex-mono px-[1px] '} {...props}>
          {children}
        </code>
      );
    },
    pre: ({ children }) => (
      <pre className='bg-indigo-200 font-jetbrains px-12 py-8 my-8 text-wrap text-[80%]'>
        {children}
      </pre>
    ),
    ```
````

í˜„ì¬ `md` íŒŒì¼ì„ `MDXRemote` ë¥¼ ì´ìš©í•´ `jsx` ê°ì²´ë¡œ ë³€ê²½í•œ í›„ ìŠ¤íƒ€ì¼ë§ì— ì‚¬ìš© í•  `MDXComponents` ë¥¼ ê±´ë‚´ì¤˜ ì–´ì°Œ ì €ì°Œ `pre , code` ë¶€ë¶„ë“¤ì´ ì½”ë“œ ë¸”ë¡ì˜ ëª¨ì–‘ìƒˆë¥¼ ê°€ì§€ê³  ìˆë‹¤.

ë‚˜ë¥¼ ê±°ì˜ êµ­ë£° ì½”ë”© í°íŠ¸ì¸ `jetbranis` ë¥¼ ì´ìš©í•´ ì½”ë“œ ë¸”ë¡ ëŠë‚Œì€ ë‚˜ì§€ë§Œ ì—¬ì „íˆ ì•„ì‰¬ìš´ ì ì´ ìˆë‹¤.

ì–¸ì–´ ë³„ í¬ë§·ì— ë§ê²Œ ì½”ë“œ ë¸”ë¡ ê¸€ì´ í¬ë§·íŒ…ì´ ì•ˆëœë‹¤ëŠ” ì ê³¼ ì»¤ìŠ¤í…€ ë¸”ë¡œê·¸ì¸ ë§Œí¼ ë‚´ê°€ ì›í•˜ëŠ” ì½”ë“œ ë¸”ëŸ­ì— ì¤„ì„ ì¹˜ê±°ë‚˜, íƒ€ì´í‹€ì„ ë„£ëŠ” ë“±ì˜ ì»¤ìŠ¤í…€í™”ê°€ ì•ˆëœë‹¤.

ë„ˆë¬´ ëª»ìƒê²¼ë‹¤ ì´ë§ì´ì•¼ ~~~~

ê·¸ë˜ì„œ ì½”ë“œ í¬ë§·í„° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ì£¼ë„ë¡ í•˜ì :)

# ì‚¬ìš© í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ : `rehype-pretty-code`

[Next.js ë¸”ë¡œê·¸ì—ì„œ ì½”ë“œ ë¸”ë¡ ê¾¸ë¯¸ê¸°, rehype-pretty-code í”ŒëŸ¬ê·¸ì¸ í™œìš©ë²•](https://kilee.dev/blog/next-js-blog-codeblock-styling)

í•´ë‹¹ ê²Œì‹œê¸€ì„ ë§ì´ ì°¸ê³ í–ˆë‹¤.

ë¬¼ë¡  í•´ë‹¹ ê¸€ì€ ì§€ê¸ˆì€ ì‚¬ì¥ëœ `contentLayer` ë¥¼ ì´ìš© í•  ë–„ì˜ ì´ì•¼ê¸°ì´ì§€ë§Œ ê±°ì˜ ì‚¬ìš© ë°©ë²•ì€ ê°™ìœ¼ë‹ˆ ê°€ë³´ìê³ 

```tsx
// next.config.mjs
import nextMDX from '@next/mdx';

const withMDX = nextMDX({
  extension: /\.(md|mdx)?$/,
});

/** @type {import('next').NextConfig} */
const nextConfig = { reactStrictMode: true };

export default withMDX(nextConfig);
```

> í˜¹ì‹œ ì´ì „ í¬ìŠ¤íŠ¸ë“¤ì„ ë³´ë©° ë”°ë¼ì˜¨ ì‚¬ëŒë“¤ì´ ìˆì„ ìˆ˜ë„ ìˆì–´ ì´ì•¼ê¸° í•˜ìë©´ ì´ì „ì—” next.config.js ë¥¼ ì´ìš©í•˜ì—¬ `require` ë¬¸ë²•ì„ ì‚¬ìš©í–ˆë‹¤.
>
> í•˜ì§€ë§Œ ì´ë²ˆ ë‹¨ê³„ì—ì„œ `mjs` í˜•íƒœë¡œ ë°”ê¾¸ê³  `EMCAmodule` ë°©ë²•ì„ ì„ íƒí•˜ì—¬ ìµìˆ™í•œ `import , export` ë¬¸ë²•ìœ¼ë¡œ ëŒ€ì²´í–ˆë‹¤. :)

í˜„ì¬ëŠ” `@next/mdx` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ `mdx,md` ì™€ ê°™ì€ `plain text` ë¥¼ ì»´íŒŒì¼ í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¡œ ì‚¬ìš© í•˜ê³  ìˆë‹¤.

`@next/mdx` ì—ì„  `bable-loader` ë¥¼ ì´ìš©í•˜ì—¬ `mdx , md` ì˜ í…ìŠ¤íŠ¸ë¥¼ í•´ì„í•˜ì—¬ `jsx` ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” `remark` íŒ¨í‚¤ì§€ì™€ `html` ì„ ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬ í˜•íƒœì˜ ë°ì´í„°ë¡œ ë§Œë“¤ì–´ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë³€ê²½ì„ `jsx` ì— ì ìš© í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” `rehype` íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•œë‹¤.

ì´ ë•Œ **ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ì¤˜ `md,mdx` íŒŒì¼ì´ `jsx` ê°ì²´ë¡œ ë³€í™˜ ë  ë•Œ ì»¤ìŠ¤í…€í™” ëœ `jsx` ê°ì²´ë¡œ ë³€í™˜í•´ì¤„ ìˆ˜ ìˆìœ¼ë©° , ê·¸ëŸ¬ê¸° ìœ„í•´ ì‚¬ìš© í•  í”ŒëŸ¬ê·¸ì¸ì€ `rehype-pretty-plugin` ì´ë‹¤.**

`rehype-pretty-plugin` ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì»¨ë²¤ì…˜ìœ¼ë¡œ ì½”ë“œ ë¸”ë¡ì„ ì‘ì„±í•´ì¤€ë‹¤ë©´ `jsx` ê°ì²´ë¡œ ë³€í™˜ í•  ë–„ ì„ ì–¸í•´ë‘” ìŠ¤íƒ€ì¼ë§ ëœ `jsx` ê°ì²´ë¡œ ë³€í™˜ í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. í˜¸í˜¸í˜¸ ë ›ì¸ ê³ 

[rehype-pretty-plugin ê³µì‹ ë¬¸ì„œ](https://rehype-pretty.pages.dev/)

## í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

---

```bash
$ npm install rehype-pretty-code

added 14 packages, and audited 711 packages in 8s

241 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
```

ë‹¤ìŒê³¼ ê°™ì´ `rehype-prety-code` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ì£¼ì

## `next.config.mjs` ì— `plugin` ì¶”ê°€í•˜ê¸°

---

```js
import nextMDX from '@next/mdx';
import rehypePrettyCode from 'rehype-pretty-code';

/** @type {import('rehype-pretty-code').Options} */
const options = {
  // See Options section below.
};

const withMDX = nextMDX({
  extension: /\.(md|mdx)?$/,
  options: {
    remarkPlugins: [],
    rehypePlugins: [[rehypePrettyCode, options]],
  },
});

/** @type {import('next').NextConfig} */
const nextConfig = { reactStrictMode: true };

export default withMDX(nextConfig);
```

ì´ì œ ë‹¤ìŒê³¼ ê°™ì´ `nextMDX.options` ì— í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ `rehypePrettyCode , options` ë¥¼ ì¶”ê°€í•´ì£¼ì

ì¶”í›„ ì„¤ëª…í•˜ê² ì§€ë§Œ `options` ëŠ” í”ŒëŸ¬ê·¸ì¸ì—ì„œ ì‚¬ìš© í•  ê¸°ë³¸ ì„¤ì • ê°’ë“¤ì´ë‚˜ ë©”ì†Œë“œ ë“±ì„ ë‹´ì€ ê°ì²´ì´ë‹¤.

#### `options` ê°€ ì„ ì–¸ëœ íƒ€ì…ì˜ ëª¨ìŠµ

```tsx
interface Options {
  grid?: boolean;
  theme?: Theme | Record<string, Theme>;
  keepBackground?: boolean;
  defaultLang?: string | { block?: string; inline?: string };
  tokensMap?: Record<string, string>;
  transformers?: ShikiTransformer[];
  filterMetaString?(str: string): string;
  getHighlighter?(options: BundledHighlighterOptions): Promise<Highlighter>;
  onVisitLine?(element: LineElement): void;
  onVisitHighlightedLine?(element: LineElement): void;
  onVisitHighlightedChars?(element: CharsElement, id: string | undefined): void;
  onVisitTitle?(element: Element): void;
  onVisitCaption?(element: Element): void;
}
```

ì˜µì…˜ë“¤ì€ ë‚˜ì¤‘ì— `plugin` ì„ ì‹¤í–‰ ì‹œí‚¨ í›„ í•˜ë‚˜ ì”© ì¡°ì •í•´ê°€ë©´ì„œ ì•Œì•„ê°€ë„ë¡ í•˜ì

# ì‚¬ìš© í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ : `shiki`

```bash
npm install shiki

up to date, audited 711 packages in 1s

241 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
```

ë˜ ì‚¬ìš© í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ `shiki` ë¥¼ ì„¤ì¹˜í•´ì£¼ë„ë¡ í•˜ì

í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì½”ë“œ ë¸”ë¡ì—ì„œ ì‚¬ìš© í•  í…Œë§ˆë¥¼ ì§€ì •í•˜ê±°ë‚˜ , í•˜ì´ë¼ì´íŒ… í•  ë–„ ì‚¬ìš© í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

`TextMeta` ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ í•˜ì´ë¼ì´íŒ… í•  ì½”ë“œë¥¼ í‘œì‹œí•˜ê±°ë‚˜ , ë‹¤ì–‘ í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì— ëŒ€í•œ í¬ë§·íŒ…ì„ ì§€ì›í•œë‹¤.

> `TextMeta` ë¬¸ë²•ì€ ì´ì „ `md , mdx` íŒŒì¼ì„ ì ì„ ë•Œ `---` ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆˆ í›„
>
> `gray-matter` ë¡œ íŒŒì‹±í•˜ì—¬ ê°€ì ¸ì™”ì„ ë•Œ ì²˜ëŸ¼ `---` ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ  ë©”íƒ€ ë°ì´í„°ì™€ ë³¸ë¬¸ ë°ì´í„°ë¥¼ ë‚˜ëˆ„ëŠ” ë¬¸ë²•ì„ ì˜ë¯¸í•œë‹¤.

ì¤‘ìš”í•œ ì ì€ **ì„œë²„ ì¸¡ì—ì„œ í•˜ì´ë¼ì´íŒ…ì„ ìˆ˜í–‰ í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì„ ì§€ì›í•˜ëŠ” `NextJS` ì—ì„œ ì•„ì£¼ íƒì›”í•œ ì„ íƒì´ë¼ëŠ” ê²ƒì´ë‹¤.**

ë˜ ë‹¤ë¥¸ í•˜ì´ë¼ì´íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë¹„í•´ ì†ë„ê°€ ë§¤ìš° ë¹ ë¥´ë‹¤ê³  í•˜ë©° `VScode` ì— ì •ì˜ ëœ ëª¨ë“  í…Œë§ˆë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.

ì„¸ìƒì— ì´ë ‡ê²Œ ê³ ë§ˆìš´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆì„ ìˆ˜ê°€ ğŸ¤©

# `rehype-pretty-code` ìì²´ëŠ” ìŠ¤íƒ€ì¼ë§ì„ ë„ì™€ì£¼ì§€ ì•ŠëŠ”ë‹¤.

ì´ê²Œ ë¬´ìŠ¨ ì†Œë¦¬ì¸ê°€ ì‹¶ì„ ìˆ˜ ìˆì§€ë§Œ ê³µì‹ ë¬¸ì„œì— ë‚˜ì˜¨ ì„¤ëª… ê·¸ëŒ€ë¡œì´ë‹¤.

![ìŠ¤íƒ€ì¼ë§ì„ ë„ì™€ì£¼ì§€ ì•ŠëŠ”ë‹¤.](image-1.png)

